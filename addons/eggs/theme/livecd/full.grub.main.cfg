set theme=/boot/grub/theme.cfg

menuentry "{{{fullname}}} Live/Installation" {
    set gfxpayload=keep
    {{{rmModules}}}
    linux {{{vmlinuz}}} {{{kernel_parameters}}} auto noprompt quiet splash i915.fastboot=1 elevator=none audit=0 nosmt priority=critical retbleed=off mitigations=off audit=0 amd_pstate.enable=1 amd-pstate=active intel_pstate=enable nowatchdog fsck.mode=skip debugfs=off nmi_watchdog=0 debug=0  show_ssp=0 earlyprintk=off kaslr=off no_pasr cfi=off oops=panic 
    initrd {{{initrdImg}}}
    {{{devicetree}}}
}

menuentry "{{{fullname}}} Safe Mode" {
    set gfxpayload=keep
    {{{rmModules}}}
    linux {{{vmlinuz}}} {{{kernel_parameters}}} auto noprompt nomodeset  auto noprompt quiet splash i915.fastboot=1 elevator=none audit=0 nosmt priority=critical retbleed=off mitigations=off audit=0 amd_pstate.enable=1 amd-pstate=active intel_pstate=enable nowatchdog fsck.mode=skip debugfs=off nmi_watchdog=0 debug=0  show_ssp=0 earlyprintk=off kaslr=off no_pasr cfi=off oops=panic 
    initrd {{{initrdImg}}}
    {{{devicetree}}}
}

menuentry "{{{fullname}}} Text Mode" {
    set gfxpayload=keep
    {{{rmModules}}}
    linux {{{vmlinuz}}} {{{kernel_parameters}}} auto noprompt init 3  auto noprompt quiet splash i915.fastboot=1 elevator=none audit=0 nosmt priority=critical retbleed=off mitigations=off audit=0 amd_pstate.enable=1 amd-pstate=active intel_pstate=enable nowatchdog fsck.mode=skip debugfs=off nmi_watchdog=0 debug=0  show_ssp=0 earlyprintk=off kaslr=off no_pasr cfi=off oops=panic 
    initrd {{{initrdImg}}}
    {{{devicetree}}}
}

menuentry "{{{fullname}}} Forensics Mode" {
    set gfxpayload=keep
    {{{rmModules}}}
    linux {{{vmlinuz}}} {{{kernel_parameters}}}  forensic noautomount noswap toram   auto noprompt quiet splash i915.fastboot=1 elevator=none audit=0 nosmt priority=critical retbleed=off mitigations=off audit=0 amd_pstate.enable=1 amd-pstate=active intel_pstate=enable nowatchdog fsck.mode=skip debugfs=off nmi_watchdog=0 debug=0  show_ssp=0 earlyprintk=off kaslr=off no_pasr cfi=off oops=panic  
    initrd {{{initrdImg}}}
    {{{devicetree}}}
}

menuentry "{{{fullname}}}  NoAcpi Mode" {
    set gfxpayload=keep
    {{{rmModules}}}
    linux {{{vmlinuz}}} {{{kernel_parameters}}} noapic auto noprompt quiet splash i915.fastboot=1 elevator=none audit=0 nosmt priority=critical retbleed=off mitigations=off audit=0 amd_pstate.enable=1 amd-pstate=active intel_pstate=enable nowatchdog fsck.mode=skip debugfs=off nmi_watchdog=0 debug=0  show_ssp=0 earlyprintk=off kaslr=off no_pasr cfi=off oops=panic 
    initrd {{{initrdImg}}}
    {{{devicetree}}}
}

menuentry "{{{fullname}}}  iommu Mode" {
    set gfxpayload=keep
    {{{rmModules}}}
    linux {{{vmlinuz}}} {{{kernel_parameters}}}  iommu=soft  auto noprompt quiet splash i915.fastboot=1 elevator=none audit=0 nosmt priority=critical retbleed=off mitigations=off audit=0 amd_pstate.enable=1 amd-pstate=active intel_pstate=enable nowatchdog fsck.mode=skip debugfs=off nmi_watchdog=0 debug=0  show_ssp=0 earlyprintk=off kaslr=off no_pasr cfi=off oops=panic 
    initrd {{{initrdImg}}}
    {{{devicetree}}}
}

menuentry "{{{fullname}}}  Encrypted Mode" {
    set gfxpayload=keep
    {{{rmModules}}}
    linux {{{vmlinuz}}} {{{kernel_parameters}}}  persistent=cryptsetup persistence-encryption=luks persistent persistence  auto noprompt quiet splash i915.fastboot=1 elevator=none audit=0 nosmt priority=critical retbleed=off mitigations=off audit=0 amd_pstate.enable=1 amd-pstate=active intel_pstate=enable nowatchdog fsck.mode=skip debugfs=off nmi_watchdog=0 debug=0  show_ssp=0 earlyprintk=off kaslr=off no_pasr cfi=off oops=panic  
    initrd {{{initrdImg}}}
    {{{devicetree}}}    
}

menuentry "{{{fullname}}}  Recovery Mode" {
    set gfxpayload=keep
    {{{rmModules}}}
    linux {{{vmlinuz}}} {{{kernel_parameters}}}  recovery nomodeset  auto noprompt quiet splash i915.fastboot=1 elevator=none audit=0 nosmt priority=critical retbleed=off mitigations=off audit=0 amd_pstate.enable=1 amd-pstate=active intel_pstate=enable nowatchdog fsck.mode=skip debugfs=off nmi_watchdog=0 debug=0  show_ssp=0 earlyprintk=off kaslr=off no_pasr cfi=off oops=panic 
    initrd {{{initrdImg}}}
    {{{devicetree}}}    
}


if [ "$grub_platform" = "efi" ]; then
menuentry "Boot from local disk" {
	exit 1
}
fi
